<!DOCTYPE html>
<html>
<head>
  <style>
    .error {
        color: red;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-lite@4.17.0"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 400, "continuousHeight": 300, "strokeWidth": 0}, "axisLeft": {"labelColor": "rgb(102, 111, 137)", "labelFont": "Roboto, Arial, sans-serif", "labelFontSize": 16}, "title": {"anchor": "start", "color": "rgb(25, 39, 78)", "font": "Roboto, Arial, sans-serif", "fontSize": 20, "fontWeight": "bold", "offset": 20}}, "layer": [{"data": {"name": "data-a4e7288efc1afc62e07439b1b9db63f1"}, "mark": {"type": "rule", "stroke": "rgb(102, 111, 137)", "strokeWidth": 1.25, "tooltip": null}, "encoding": {"x": {"field": "x", "scale": {"domain": [-2, 2], "range": [40.0, 760.0]}, "type": "quantitative"}, "x2": {"field": "x2"}, "y": {"axis": {"domain": false, "labelAngle": 0, "labelPadding": -30, "orient": "left", "ticks": false, "title": null}, "field": "metric", "scale": {"domain": ["FPR", "FDR", "PPREV"], "range": [55.0, 495.0]}, "type": "nominal"}}}, {"data": {"name": "data-79dd248bdaa0ea02c535240e8ad022c8"}, "mark": {"type": "rule", "stroke": "rgb(102, 111, 137)", "strokeDash": [5, 5], "strokeWidth": 1}, "encoding": {"tooltip": {"value": "Male [REF]"}, "x": {"value": 400.0}, "y": {"value": 45.833333333333336}, "y2": {"value": 504.16666666666663}}}, {"data": {"name": "data-c233327f4cd9b4c2df31bf8015c83e4a"}, "mark": {"type": "text", "align": "center", "color": "rgb(102, 111, 137)", "font": "Roboto, Arial, sans-serif", "fontSize": 12, "fontWeight": "normal", "tooltip": null}, "encoding": {"text": {"field": "label", "type": "nominal"}, "x": {"field": "value", "scale": {"domain": [-2, 2], "range": [40.0, 760.0]}, "type": "quantitative"}, "y": {"value": 38.5}}}, {"layer": [{"mark": {"type": "text", "align": "left", "fill": "rgb(102, 111, 137)", "font": "Roboto, Arial, sans-serif", "fontSize": 12, "fontWeight": "normal", "tooltip": null}, "encoding": {"text": {"value": "Times Smaller"}, "x": {"value": 40.0}, "y": {"value": 16.5}}}, {"mark": {"type": "text", "align": "right", "fill": "rgb(102, 111, 137)", "font": "Roboto, Arial, sans-serif", "fontSize": 12, "fontWeight": "normal", "tooltip": null}, "encoding": {"text": {"value": "Times Larger"}, "x": {"value": 760.0}, "y": {"value": 16.5}}}, {"mark": {"type": "text", "align": "center", "fill": "rgb(102, 111, 137)", "font": "Roboto, Arial, sans-serif", "fontSize": 12, "fontWeight": "normal", "tooltip": null}, "encoding": {"text": {"value": "Equal"}, "x": {"value": 400.0}, "y": {"value": 16.5}}}], "data": {"name": "data-79dd248bdaa0ea02c535240e8ad022c8"}}, {"layer": [{"mark": {"type": "rule", "opacity": 0.8, "stroke": "rgb(211, 47, 47)", "strokeWidth": 1.25, "tooltip": null}, "encoding": {"x": {"field": "min", "scale": {"domain": [-2, 2], "range": [40.0, 760.0]}, "type": "quantitative"}, "y": {"value": 55.0}, "y2": {"value": 495.0}}}, {"mark": {"type": "rule", "opacity": 0.8, "stroke": "rgb(211, 47, 47)", "strokeWidth": 1.25, "tooltip": null}, "encoding": {"x": {"field": "max", "scale": {"domain": [-2, 2], "range": [40.0, 760.0]}, "type": "quantitative"}, "y": {"value": 55.0}, "y2": {"value": 495.0}}}, {"layer": [{"mark": {"type": "rect", "fill": "rgb(211, 47, 47)", "opacity": 0.1, "tooltip": null}, "encoding": {"x": {"field": "min", "scale": {"domain": [-2, 2], "range": [40.0, 760.0]}, "type": "quantitative"}, "x2": {"field": "lower_end"}, "y": {"value": 55.0}, "y2": {"value": 495.0}}}, {"mark": {"type": "rect", "fill": "rgb(211, 47, 47)", "opacity": 0.1, "tooltip": null}, "encoding": {"x": {"field": "max", "scale": {"domain": [-2, 2], "range": [40.0, 760.0]}, "type": "quantitative"}, "x2": {"field": "upper_end"}, "y": {"value": 55.0}, "y2": {"value": 495.0}}}]}, {"layer": [{"mark": {"type": "text", "align": "left", "baseline": "top", "fill": "rgb(211, 47, 47)", "font": "Roboto, Arial, sans-serif", "fontSize": 12, "fontWeight": "normal", "tooltip": null}, "encoding": {"text": {"value": "The metric value for any group should not be 1.25 (or more) times smaller or larger than that of the reference group Male."}, "x": {"value": 0}, "y": {"value": 513.3333333333334}}}], "data": {"name": "data-79dd248bdaa0ea02c535240e8ad022c8"}}], "data": {"name": "data-feb20f5d4dfe62687617135ffee93d46"}}, {"layer": [{"data": {"name": "empty"}, "mark": "circle"}, {"data": {"name": "data-35bc49a1bd400f0ff18cf5146d0c2ea6"}, "mark": {"type": "circle", "cursor": "pointer", "opacity": 0.2}, "encoding": {"color": {"condition": {"field": "attribute_value", "legend": null, "scale": {"domain": ["Male", "Female"], "range": ["rgb(102, 111, 137)", "rgb(76, 136, 238)", "rgb(254, 97, 0)", "rgb(220, 38, 127)", "rgb(255, 176, 0)", "rgb(150, 95, 230)"]}, "type": "nominal", "selection": "selector001"}, "value": "rgb(225, 226, 231)"}, "size": {"field": "group_size", "legend": null, "scale": {"domain": [0, 154.79999999999998], "range": [0, 4223.696789826277]}, "type": "quantitative"}, "tooltip": [{"field": "attribute_value", "title": "Group", "type": "nominal"}, {"field": "tooltip_group_size", "title": "Group Size", "type": "nominal"}, {"field": "tooltip_disparity_explanation_fpr", "title": "Disparity", "type": "nominal"}, {"field": "fpr", "format": ".2f", "title": "FPR", "type": "quantitative"}], "x": {"axis": {"domain": false, "gridColor": "rgb(225, 226, 231)", "labels": false, "ticks": false, "title": null, "values": [1, 2, -2, -1]}, "field": "fpr_disparity_scaled", "scale": {"domain": [-2, 2], "range": [40.0, 760.0]}, "type": "quantitative"}, "y": {"axis": {"domain": false, "grid": false, "labels": false, "ticks": false, "title": null}, "field": "metric_variable", "scale": {"domain": ["FPR", "FDR", "PPREV"], "range": [55.0, 495.0]}, "type": "nominal"}}, "selection": {"selector003": {"type": "multi", "empty": "all", "fields": ["attribute_value"]}}, "transform": [{"calculate": "'FPR'", "as": "metric_variable"}]}, {"data": {"name": "data-35bc49a1bd400f0ff18cf5146d0c2ea6"}, "mark": {"type": "circle", "cursor": "pointer", "opacity": 0.2}, "encoding": {"color": {"condition": {"field": "attribute_value", "legend": null, "scale": {"domain": ["Male", "Female"], "range": ["rgb(102, 111, 137)", "rgb(76, 136, 238)", "rgb(254, 97, 0)", "rgb(220, 38, 127)", "rgb(255, 176, 0)", "rgb(150, 95, 230)"]}, "type": "nominal", "selection": "selector001"}, "value": "rgb(225, 226, 231)"}, "size": {"field": "group_size", "legend": null, "scale": {"domain": [0, 154.79999999999998], "range": [0, 4223.696789826277]}, "type": "quantitative"}, "tooltip": [{"field": "attribute_value", "title": "Group", "type": "nominal"}, {"field": "tooltip_group_size", "title": "Group Size", "type": "nominal"}, {"field": "tooltip_disparity_explanation_fdr", "title": "Disparity", "type": "nominal"}, {"field": "fdr", "format": ".2f", "title": "FDR", "type": "quantitative"}], "x": {"axis": {"domain": false, "gridColor": "rgb(225, 226, 231)", "labels": false, "ticks": false, "title": null, "values": [1, 2, -2, -1]}, "field": "fdr_disparity_scaled", "scale": {"domain": [-2, 2], "range": [40.0, 760.0]}, "type": "quantitative"}, "y": {"axis": {"domain": false, "grid": false, "labels": false, "ticks": false, "title": null}, "field": "metric_variable", "scale": {"domain": ["FPR", "FDR", "PPREV"], "range": [55.0, 495.0]}, "type": "nominal"}}, "selection": {"selector005": {"type": "multi", "empty": "all", "fields": ["attribute_value"]}}, "transform": [{"calculate": "'FDR'", "as": "metric_variable"}]}, {"data": {"name": "data-35bc49a1bd400f0ff18cf5146d0c2ea6"}, "mark": {"type": "circle", "cursor": "pointer", "opacity": 0.2}, "encoding": {"color": {"condition": {"field": "attribute_value", "legend": null, "scale": {"domain": ["Male", "Female"], "range": ["rgb(102, 111, 137)", "rgb(76, 136, 238)", "rgb(254, 97, 0)", "rgb(220, 38, 127)", "rgb(255, 176, 0)", "rgb(150, 95, 230)"]}, "type": "nominal", "selection": "selector001"}, "value": "rgb(225, 226, 231)"}, "size": {"field": "group_size", "legend": null, "scale": {"domain": [0, 154.79999999999998], "range": [0, 4223.696789826277]}, "type": "quantitative"}, "tooltip": [{"field": "attribute_value", "title": "Group", "type": "nominal"}, {"field": "tooltip_group_size", "title": "Group Size", "type": "nominal"}, {"field": "tooltip_disparity_explanation_pprev", "title": "Disparity", "type": "nominal"}, {"field": "pprev", "format": ".2f", "title": "PPREV", "type": "quantitative"}], "x": {"axis": {"domain": false, "gridColor": "rgb(225, 226, 231)", "labels": false, "ticks": false, "title": null, "values": [1, 2, -2, -1]}, "field": "pprev_disparity_scaled", "scale": {"domain": [-2, 2], "range": [40.0, 760.0]}, "type": "quantitative"}, "y": {"axis": {"domain": false, "grid": false, "labels": false, "ticks": false, "title": null}, "field": "metric_variable", "scale": {"domain": ["FPR", "FDR", "PPREV"], "range": [55.0, 495.0]}, "type": "nominal"}}, "selection": {"selector007": {"type": "multi", "empty": "all", "fields": ["attribute_value"]}}, "transform": [{"calculate": "'PPREV'", "as": "metric_variable"}]}, {"layer": [{"data": {"name": "empty"}, "mark": "point"}, {"data": {"name": "data-35bc49a1bd400f0ff18cf5146d0c2ea6"}, "mark": {"type": "point", "cursor": "pointer", "filled": true, "size": 60}, "encoding": {"color": {"condition": {"field": "attribute_value", "legend": null, "scale": {"domain": ["Male", "Female"], "range": ["rgb(102, 111, 137)", "rgb(76, 136, 238)", "rgb(254, 97, 0)", "rgb(220, 38, 127)", "rgb(255, 176, 0)", "rgb(150, 95, 230)"]}, "type": "nominal", "selection": "selector001"}, "value": "rgb(225, 226, 231)"}, "shape": {"field": "attribute_value", "legend": null, "scale": {"domain": ["Male", "Female"], "range": ["cross", "circle"]}, "type": "nominal"}, "tooltip": [{"field": "attribute_value", "title": "Group", "type": "nominal"}, {"field": "tooltip_group_size", "title": "Group Size", "type": "nominal"}, {"field": "tooltip_disparity_explanation_fpr", "title": "Disparity", "type": "nominal"}, {"field": "fpr", "format": ".2f", "title": "FPR", "type": "quantitative"}], "x": {"axis": {"domain": false, "gridColor": "rgb(225, 226, 231)", "labels": false, "ticks": false, "title": null, "values": [1, 2, -2, -1]}, "field": "fpr_disparity_scaled", "scale": {"domain": [-2, 2], "range": [40.0, 760.0]}, "type": "quantitative"}, "y": {"axis": {"domain": false, "grid": false, "labels": false, "ticks": false, "title": null}, "field": "metric_variable", "scale": {"domain": ["FPR", "FDR", "PPREV"], "range": [55.0, 495.0]}, "type": "nominal"}}, "selection": {"selector002": {"type": "multi", "empty": "all", "fields": ["attribute_value"]}}, "transform": [{"calculate": "'FPR'", "as": "metric_variable"}]}, {"data": {"name": "data-35bc49a1bd400f0ff18cf5146d0c2ea6"}, "mark": {"type": "point", "cursor": "pointer", "filled": true, "size": 60}, "encoding": {"color": {"condition": {"field": "attribute_value", "legend": null, "scale": {"domain": ["Male", "Female"], "range": ["rgb(102, 111, 137)", "rgb(76, 136, 238)", "rgb(254, 97, 0)", "rgb(220, 38, 127)", "rgb(255, 176, 0)", "rgb(150, 95, 230)"]}, "type": "nominal", "selection": "selector001"}, "value": "rgb(225, 226, 231)"}, "shape": {"field": "attribute_value", "legend": null, "scale": {"domain": ["Male", "Female"], "range": ["cross", "circle"]}, "type": "nominal"}, "tooltip": [{"field": "attribute_value", "title": "Group", "type": "nominal"}, {"field": "tooltip_group_size", "title": "Group Size", "type": "nominal"}, {"field": "tooltip_disparity_explanation_fdr", "title": "Disparity", "type": "nominal"}, {"field": "fdr", "format": ".2f", "title": "FDR", "type": "quantitative"}], "x": {"axis": {"domain": false, "gridColor": "rgb(225, 226, 231)", "labels": false, "ticks": false, "title": null, "values": [1, 2, -2, -1]}, "field": "fdr_disparity_scaled", "scale": {"domain": [-2, 2], "range": [40.0, 760.0]}, "type": "quantitative"}, "y": {"axis": {"domain": false, "grid": false, "labels": false, "ticks": false, "title": null}, "field": "metric_variable", "scale": {"domain": ["FPR", "FDR", "PPREV"], "range": [55.0, 495.0]}, "type": "nominal"}}, "selection": {"selector004": {"type": "multi", "empty": "all", "fields": ["attribute_value"]}}, "transform": [{"calculate": "'FDR'", "as": "metric_variable"}]}, {"data": {"name": "data-35bc49a1bd400f0ff18cf5146d0c2ea6"}, "mark": {"type": "point", "cursor": "pointer", "filled": true, "size": 60}, "encoding": {"color": {"condition": {"field": "attribute_value", "legend": null, "scale": {"domain": ["Male", "Female"], "range": ["rgb(102, 111, 137)", "rgb(76, 136, 238)", "rgb(254, 97, 0)", "rgb(220, 38, 127)", "rgb(255, 176, 0)", "rgb(150, 95, 230)"]}, "type": "nominal", "selection": "selector001"}, "value": "rgb(225, 226, 231)"}, "shape": {"field": "attribute_value", "legend": null, "scale": {"domain": ["Male", "Female"], "range": ["cross", "circle"]}, "type": "nominal"}, "tooltip": [{"field": "attribute_value", "title": "Group", "type": "nominal"}, {"field": "tooltip_group_size", "title": "Group Size", "type": "nominal"}, {"field": "tooltip_disparity_explanation_pprev", "title": "Disparity", "type": "nominal"}, {"field": "pprev", "format": ".2f", "title": "PPREV", "type": "quantitative"}], "x": {"axis": {"domain": false, "gridColor": "rgb(225, 226, 231)", "labels": false, "ticks": false, "title": null, "values": [1, 2, -2, -1]}, "field": "pprev_disparity_scaled", "scale": {"domain": [-2, 2], "range": [40.0, 760.0]}, "type": "quantitative"}, "y": {"axis": {"domain": false, "grid": false, "labels": false, "ticks": false, "title": null}, "field": "metric_variable", "scale": {"domain": ["FPR", "FDR", "PPREV"], "range": [55.0, 495.0]}, "type": "nominal"}}, "selection": {"selector006": {"type": "multi", "empty": "all", "fields": ["attribute_value"]}}, "transform": [{"calculate": "'PPREV'", "as": "metric_variable"}]}]}]}, {"layer": [{"mark": {"type": "point", "cursor": "pointer", "filled": true, "opacity": 1, "size": 40}, "encoding": {"color": {"condition": {"field": "attribute_value", "legend": null, "scale": {"domain": ["Male", "Female"], "range": ["rgb(102, 111, 137)", "rgb(76, 136, 238)", "rgb(254, 97, 0)", "rgb(220, 38, 127)", "rgb(255, 176, 0)", "rgb(150, 95, 230)"]}, "type": "nominal", "selection": "selector001"}, "value": "rgb(225, 226, 231)"}, "shape": {"field": "attribute_value", "legend": null, "scale": {"domain": ["Male", "Female"], "range": ["cross", "circle"]}, "type": "nominal"}, "x": {"value": 807.5682482323056}, "y": {"axis": {"domain": false, "grid": false, "labels": false, "ticks": false, "title": null}, "field": "attribute_value", "scale": {"domain": ["Male", "Female"], "range": [54, 86]}, "type": "nominal"}}, "selection": {"selector001": {"type": "multi", "empty": "all", "fields": ["attribute_value"]}}}, {"mark": {"type": "text", "align": "left", "baseline": "middle", "cursor": "pointer", "font": "Roboto, Arial, sans-serif", "fontSize": 12, "fontWeight": "normal"}, "encoding": {"color": {"condition": {"field": "attribute_value", "legend": null, "scale": {"domain": ["Male", "Female"], "range": ["rgb(102, 111, 137)", "rgb(76, 136, 238)", "rgb(254, 97, 0)", "rgb(220, 38, 127)", "rgb(255, 176, 0)", "rgb(150, 95, 230)"]}, "type": "nominal", "selection": "selector001"}, "value": "rgb(225, 226, 231)"}, "text": {"field": "label", "type": "nominal"}, "x": {"value": 818.1364964646111}, "y": {"axis": {"domain": false, "grid": false, "labels": false, "ticks": false, "title": null}, "field": "attribute_value", "scale": {"domain": ["Male", "Female"], "range": [54, 86]}, "type": "nominal"}}, "selection": {"selector008": {"type": "multi", "empty": "all", "fields": ["attribute_value"]}}}, {"data": {"name": "data-79dd248bdaa0ea02c535240e8ad022c8"}, "mark": {"type": "text", "align": "left", "baseline": "top", "color": "rgb(25, 39, 78)", "font": "Roboto, Arial, sans-serif", "fontSize": 12, "fontWeight": "bold"}, "encoding": {"text": {"value": "(click to highlight)"}, "x": {"value": 800}, "y": {"value": 34}}}, {"data": {"name": "data-79dd248bdaa0ea02c535240e8ad022c8"}, "mark": {"type": "text", "align": "left", "baseline": "top", "color": "rgb(25, 39, 78)", "font": "Roboto, Arial, sans-serif", "fontSize": 12, "fontWeight": "bold"}, "encoding": {"text": {"value": "Groups"}, "x": {"value": 800}, "y": {"value": 20}}}], "data": {"name": "data-d79b6fcf6fc2d8883b03661337595d04"}}], "height": 550, "padding": {"top": 15, "bottom": -9.0, "left": 15, "right": 15}, "resolve": {"scale": {"size": "independent", "y": "independent"}}, "title": "Disparities on Sex_Cat", "usermeta": {"embedOptions": {"scaleFactor": 5, "downloadFileName": "disparity_chart"}}, "width": 800, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-a4e7288efc1afc62e07439b1b9db63f1": [{"metric": "FPR", "x": -2, "x2": 2}, {"metric": "FDR", "x": -2, "x2": 2}, {"metric": "PPREV", "x": -2, "x2": 2}], "data-79dd248bdaa0ea02c535240e8ad022c8": [{"a": 1, "b": 0}, {"a": 1, "b": 0}], "data-c233327f4cd9b4c2df31bf8015c83e4a": [{"value": 1, "label": 2}, {"value": 2, "label": 3}, {"value": -2, "label": 3}, {"value": -1, "label": 2}, {"value": 0, "label": "="}], "data-feb20f5d4dfe62687617135ffee93d46": [{"min": -0.25, "max": 0.25, "lower_end": -2, "upper_end": 2}], "empty": [{}], "data-35bc49a1bd400f0ff18cf5146d0c2ea6": [{"attribute_name": "sex_cat", "attribute_value": "Female", "group_size": 109, "total_entities": 238, "fpr": 0.019230769230769232, "fdr": 0.4, "pprev": 0.045871559633027525, "fpr_disparity": 0.3621794871794872, "fdr_disparity": 0.9333333333333335, "pprev_disparity": 0.4226736566186108, "fpr_disparity_scaled": -1.7610619469026547, "fdr_disparity_scaled": -0.07142857142857117, "pprev_disparity_scaled": -1.365891472868217, "tooltip_group_size": "109 (45.80%)", "tooltip_disparity_explanation_fpr": "2.76 times smaller FPR than the reference group", "tooltip_disparity_explanation_fdr": "1.07 times smaller FDR than the reference group", "tooltip_disparity_explanation_pprev": "2.37 times smaller PPREV than the reference group"}, {"attribute_name": "sex_cat", "attribute_value": "Male", "group_size": 129, "total_entities": 238, "fpr": 0.05309734513274336, "fdr": 0.42857142857142855, "pprev": 0.10852713178294573, "fpr_disparity": 1.0, "fdr_disparity": 1.0, "pprev_disparity": 1.0, "fpr_disparity_scaled": 0.0, "fdr_disparity_scaled": 0.0, "pprev_disparity_scaled": 0.0, "tooltip_group_size": "129 (54.20%)", "tooltip_disparity_explanation_fpr": "Reference group", "tooltip_disparity_explanation_fdr": "Reference group", "tooltip_disparity_explanation_pprev": "Reference group"}], "data-d79b6fcf6fc2d8883b03661337595d04": [{"attribute_value": "Male", "label": "Male [REF]"}, {"attribute_value": "Female", "label": "Female"}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div class="error" style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>